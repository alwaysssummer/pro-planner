{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Box,Button,Dialog,DialogActions,DialogContent,DialogTitle,TextField,Typography,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Paper,IconButton,Chip,CircularProgress,Alert,Snackbar,Select,MenuItem,FormControl,InputLabel}from'@mui/material';import{Add as AddIcon,Edit as EditIcon,Delete as DeleteIcon,Work as WorkIcon}from'@mui/icons-material';import{fetchGoogleSheetData,validateGoogleSheetUrl}from'../utils/googleSheets';import{taskService,studentService}from'../services/database';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TaskManagement=()=>{const[tasks,setTasks]=useState([]);const[students,setStudents]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[successMessage,setSuccessMessage]=useState(null);const[openDialog,setOpenDialog]=useState(false);const[openWorkDialog,setOpenWorkDialog]=useState(false);const[editingTask,setEditingTask]=useState(null);const[workingTask,setWorkingTask]=useState(null);const[formData,setFormData]=useState({title:'',description:'',area:'vocabulary'});const[workData,setWorkData]=useState({googleSheetLink:'',previewData:[],isLoading:false,isSaving:false,error:''});// 과제와 학생 목록 불러오기\nuseEffect(()=>{loadData();},[]);const loadData=async()=>{try{setLoading(true);const[tasksData,studentsData]=await Promise.all([taskService.getAll(),studentService.getAll()]);setTasks(tasksData);setStudents(studentsData);}catch(err){setError('데이터를 불러오는데 실패했습니다.');console.error(err);}finally{setLoading(false);}};const handleOpenDialog=(task,area)=>{if(task){setEditingTask(task);setFormData({title:task.title,description:task.description,area:task.area});}else{setEditingTask(null);setFormData({title:'',description:'',area:area||'vocabulary'});}setOpenDialog(true);};const handleCloseDialog=()=>{setOpenDialog(false);setEditingTask(null);setFormData({title:'',description:'',area:'vocabulary'});};const handleSubmit=async()=>{try{if(editingTask){// 과제 수정\nconst updatedTask=await taskService.update(editingTask.id,formData);setTasks(tasks.map(task=>task.id===editingTask.id?updatedTask:task));setSuccessMessage('과제가 수정되었습니다.');}else{// 새 과제 추가\nconst newTask=await taskService.create(formData);setTasks([...tasks,newTask]);setSuccessMessage('과제가 추가되었습니다.');}handleCloseDialog();}catch(err){setError('과제 저장에 실패했습니다.');console.error(err);}};const handleDeleteTask=async taskId=>{if(window.confirm('정말로 이 과제를 삭제하시겠습니까?')){try{await taskService.delete(taskId);setTasks(tasks.filter(task=>task.id!==taskId));setSuccessMessage('과제가 삭제되었습니다.');}catch(err){setError('과제 삭제에 실패했습니다.');console.error(err);}}};const handleWorkTask=async task=>{setWorkingTask(task);setWorkData({googleSheetLink:task.google_sheet_url||'',previewData:[],isLoading:false,isSaving:false,error:''});// 기존 단어 데이터 불러오기\nif(task.area==='vocabulary'){try{const vocabularyItems=await taskService.getVocabularyItems(task.id);setWorkData(prev=>({...prev,previewData:vocabularyItems.map(item=>({unit:item.unit,english:item.english,meaning:item.meaning}))}));}catch(err){console.error('단어 데이터 불러오기 실패:',err);}}setOpenWorkDialog(true);};const handleCloseWorkDialog=()=>{setOpenWorkDialog(false);setWorkingTask(null);setWorkData({googleSheetLink:'',previewData:[],isLoading:false,isSaving:false,error:''});};const handlePreviewSheet=async()=>{if(!workData.googleSheetLink){setWorkData({...workData,error:'구글 시트 링크를 입력해주세요.'});return;}if(!validateGoogleSheetUrl(workData.googleSheetLink)){setWorkData({...workData,error:'올바른 구글 시트 링크가 아닙니다.'});return;}setWorkData({...workData,isLoading:true,error:''});try{const data=await fetchGoogleSheetData(workData.googleSheetLink);setWorkData({...workData,previewData:data,isLoading:false,error:''});}catch(error){setWorkData({...workData,isLoading:false,error:'데이터를 불러오는데 실패했습니다. 구글 시트가 공개되어 있는지 확인해주세요.'});}};const handleSaveWork=async()=>{if(!workingTask)return;try{setWorkData({...workData,isSaving:true,error:''});// 구글 시트 URL 업데이트\nif(workData.googleSheetLink!==workingTask.google_sheet_url){await taskService.update(workingTask.id,{google_sheet_url:workData.googleSheetLink});}// 단어 데이터 저장\nif(workingTask.area==='vocabulary'&&workData.previewData.length>0){// 대량 데이터 저장 시 사용자에게 알림\nif(workData.previewData.length>1000){setSuccessMessage(`${workData.previewData.length}개의 단어를 저장 중입니다. 잠시만 기다려주세요...`);}await taskService.addVocabularyItems(workingTask.id,workData.previewData);}setSuccessMessage(`작업이 저장되었습니다. (총 ${workData.previewData.length}개 단어)`);handleCloseWorkDialog();loadData();// 데이터 새로고침\n}catch(err){setError('작업 저장에 실패했습니다.');console.error(err);}finally{setWorkData({...workData,isSaving:false});}};const getAreaText=area=>{switch(area){case'vocabulary':return'단어';case'phrase':return'문장';case'grammar':return'어법';case'logic':return'논리';default:return area;}};const getStatusText=status=>{switch(status){case'active':return'진행중';case'completed':return'완료';case'pending':return'대기중';default:return status;}};const getStatusColor=status=>{switch(status){case'active':return'primary';case'completed':return'success';case'pending':return'warning';default:return'default';}};if(loading){return/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",minHeight:\"400px\",children:/*#__PURE__*/_jsx(CircularProgress,{})});}return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"\\uACFC\\uC81C \\uAD00\\uB9AC\"}),/*#__PURE__*/_jsxs(Box,{sx:{mb:3,display:'flex',gap:2,flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:()=>handleOpenDialog(undefined,'vocabulary'),children:\"\\uB2E8\\uC5B4 \\uACFC\\uC81C \\uCD94\\uAC00\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:()=>handleOpenDialog(undefined,'phrase'),children:\"\\uBB38\\uC7A5 \\uACFC\\uC81C \\uCD94\\uAC00\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:()=>handleOpenDialog(undefined,'grammar'),children:\"\\uC5B4\\uBC95 \\uACFC\\uC81C \\uCD94\\uAC00\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:()=>handleOpenDialog(undefined,'logic'),children:\"\\uB17C\\uB9AC \\uACFC\\uC81C \\uCD94\\uAC00\"})]}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"\\uACFC\\uC81C\\uBA85\"}),/*#__PURE__*/_jsx(TableCell,{children:\"\\uC124\\uBA85\"}),/*#__PURE__*/_jsx(TableCell,{children:\"\\uC601\\uC5ED\"}),/*#__PURE__*/_jsx(TableCell,{children:\"\\uC0C1\\uD0DC\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"\\uC791\\uC5C5\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:tasks.map(task=>/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:task.title}),/*#__PURE__*/_jsx(TableCell,{children:task.description}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Chip,{label:getAreaText(task.area),size:\"small\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Chip,{label:getStatusText(task.status),size:\"small\",color:getStatusColor(task.status)})}),/*#__PURE__*/_jsxs(TableCell,{align:\"center\",children:[/*#__PURE__*/_jsx(IconButton,{onClick:()=>handleWorkTask(task),color:\"primary\",children:/*#__PURE__*/_jsx(WorkIcon,{})}),/*#__PURE__*/_jsx(IconButton,{onClick:()=>handleOpenDialog(task),color:\"primary\",children:/*#__PURE__*/_jsx(EditIcon,{})}),/*#__PURE__*/_jsx(IconButton,{onClick:()=>handleDeleteTask(task.id),color:\"error\",children:/*#__PURE__*/_jsx(DeleteIcon,{})})]})]},task.id))})]})}),/*#__PURE__*/_jsxs(Dialog,{open:openDialog,onClose:handleCloseDialog,maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:editingTask?'과제 수정':'새 과제 추가'}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(TextField,{autoFocus:true,margin:\"dense\",label:\"\\uACFC\\uC81C\\uBA85\",fullWidth:true,variant:\"outlined\",value:formData.title,onChange:e=>setFormData({...formData,title:e.target.value}),sx:{mb:2}}),/*#__PURE__*/_jsx(TextField,{margin:\"dense\",label:\"\\uC124\\uBA85\",fullWidth:true,multiline:true,rows:3,variant:\"outlined\",value:formData.description,onChange:e=>setFormData({...formData,description:e.target.value}),sx:{mb:2}}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,variant:\"outlined\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"\\uC601\\uC5ED\"}),/*#__PURE__*/_jsxs(Select,{value:formData.area,onChange:e=>setFormData({...formData,area:e.target.value}),label:\"\\uC601\\uC5ED\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"vocabulary\",children:\"\\uB2E8\\uC5B4\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"phrase\",children:\"\\uBB38\\uC7A5\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"grammar\",children:\"\\uC5B4\\uBC95\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"logic\",children:\"\\uB17C\\uB9AC\"})]})]})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleCloseDialog,children:\"\\uCDE8\\uC18C\"}),/*#__PURE__*/_jsx(Button,{onClick:handleSubmit,variant:\"contained\",children:editingTask?'수정':'추가'})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:openWorkDialog,onClose:handleCloseWorkDialog,maxWidth:\"md\",fullWidth:true,children:[/*#__PURE__*/_jsxs(DialogTitle,{children:[workingTask===null||workingTask===void 0?void 0:workingTask.title,\" - \\uC791\\uC5C5\"]}),/*#__PURE__*/_jsxs(DialogContent,{children:[(workingTask===null||workingTask===void 0?void 0:workingTask.area)==='vocabulary'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TextField,{margin:\"dense\",label:\"\\uAD6C\\uAE00 \\uC2DC\\uD2B8 \\uB9C1\\uD06C\",fullWidth:true,variant:\"outlined\",value:workData.googleSheetLink,onChange:e=>setWorkData({...workData,googleSheetLink:e.target.value}),placeholder:\"https://docs.google.com/spreadsheets/d/...\",sx:{mb:2}}),/*#__PURE__*/_jsx(Box,{sx:{mb:2,display:'flex',gap:2},children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:handlePreviewSheet,disabled:workData.isLoading,children:workData.isLoading?'불러오는 중...':'미리보기'})}),workData.error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:workData.error}),workData.previewData.length>0&&/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",gutterBottom:true,children:[\"\\uB2E8\\uC5B4 \\uB370\\uC774\\uD130 \\uBBF8\\uB9AC\\uBCF4\\uAE30 (\",workData.previewData.length,\"\\uAC1C)\"]}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,sx:{maxHeight:400},children:/*#__PURE__*/_jsxs(Table,{stickyHeader:true,size:\"small\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"\\uB2E8\\uC6D0\"}),/*#__PURE__*/_jsx(TableCell,{children:\"\\uC601\\uC5B4\"}),/*#__PURE__*/_jsx(TableCell,{children:\"\\uB73B\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:workData.previewData.map((item,index)=>/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:item.unit}),/*#__PURE__*/_jsx(TableCell,{children:item.english}),/*#__PURE__*/_jsx(TableCell,{children:item.meaning})]},index))})]})})]})]}),(workingTask===null||workingTask===void 0?void 0:workingTask.area)!=='vocabulary'&&/*#__PURE__*/_jsxs(Alert,{severity:\"info\",children:[getAreaText((workingTask===null||workingTask===void 0?void 0:workingTask.area)||''),\" \\uC601\\uC5ED\\uC758 \\uC791\\uC5C5 \\uAE30\\uB2A5\\uC740 \\uC900\\uBE44 \\uC911\\uC785\\uB2C8\\uB2E4.\"]})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleCloseWorkDialog,disabled:workData.isSaving,children:\"\\uCDE8\\uC18C\"}),/*#__PURE__*/_jsx(Button,{onClick:handleSaveWork,variant:\"contained\",disabled:workData.isSaving||(workingTask===null||workingTask===void 0?void 0:workingTask.area)==='vocabulary'&&workData.previewData.length===0,children:workData.isSaving?'저장 중...':'저장'})]})]}),/*#__PURE__*/_jsx(Snackbar,{open:!!successMessage,autoHideDuration:6000,onClose:()=>setSuccessMessage(null),children:/*#__PURE__*/_jsx(Alert,{onClose:()=>setSuccessMessage(null),severity:\"success\",children:successMessage})}),/*#__PURE__*/_jsx(Snackbar,{open:!!error,autoHideDuration:6000,onClose:()=>setError(null),children:/*#__PURE__*/_jsx(Alert,{onClose:()=>setError(null),severity:\"error\",children:error})})]});};export default TaskManagement;","map":{"version":3,"names":["React","useState","useEffect","Box","Button","Dialog","DialogActions","DialogContent","DialogTitle","TextField","Typography","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","IconButton","Chip","CircularProgress","Alert","Snackbar","Select","MenuItem","FormControl","InputLabel","Add","AddIcon","Edit","EditIcon","Delete","DeleteIcon","Work","WorkIcon","fetchGoogleSheetData","validateGoogleSheetUrl","taskService","studentService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TaskManagement","tasks","setTasks","students","setStudents","loading","setLoading","error","setError","successMessage","setSuccessMessage","openDialog","setOpenDialog","openWorkDialog","setOpenWorkDialog","editingTask","setEditingTask","workingTask","setWorkingTask","formData","setFormData","title","description","area","workData","setWorkData","googleSheetLink","previewData","isLoading","isSaving","loadData","tasksData","studentsData","Promise","all","getAll","err","console","handleOpenDialog","task","handleCloseDialog","handleSubmit","updatedTask","update","id","map","newTask","create","handleDeleteTask","taskId","window","confirm","delete","filter","handleWorkTask","google_sheet_url","vocabularyItems","getVocabularyItems","prev","item","unit","english","meaning","handleCloseWorkDialog","handlePreviewSheet","data","handleSaveWork","length","addVocabularyItems","getAreaText","getStatusText","status","getStatusColor","display","justifyContent","alignItems","minHeight","children","variant","gutterBottom","sx","mb","gap","flexWrap","startIcon","onClick","undefined","component","align","label","size","color","open","onClose","maxWidth","fullWidth","autoFocus","margin","value","onChange","e","target","multiline","rows","placeholder","disabled","severity","maxHeight","stickyHeader","index","autoHideDuration"],"sources":["C:/Users/user/pro_planner/src/pages/TaskManagement.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Box,\r\n  Button,\r\n  Card,\r\n  CardContent,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  TextField,\r\n  Typography,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Paper,\r\n  IconButton,\r\n  Chip,\r\n  CircularProgress,\r\n  Alert,\r\n  Snackbar,\r\n  Select,\r\n  MenuItem,\r\n  FormControl,\r\n  InputLabel,\r\n} from '@mui/material';\r\nimport {\r\n  Add as AddIcon,\r\n  Edit as EditIcon,\r\n  Delete as DeleteIcon,\r\n  Work as WorkIcon,\r\n} from '@mui/icons-material';\r\nimport { fetchGoogleSheetData, validateGoogleSheetUrl } from '../utils/googleSheets';\r\nimport { taskService, studentService, assignmentService } from '../services/database';\r\n\r\ninterface Task {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  area: 'vocabulary' | 'phrase' | 'grammar' | 'logic';\r\n  status: 'active' | 'completed' | 'pending';\r\n  google_sheet_url?: string;\r\n  created_at?: string;\r\n}\r\n\r\ninterface Student {\r\n  id: string;\r\n  name: string;\r\n  level: string;\r\n}\r\n\r\nconst TaskManagement: React.FC = () => {\r\n  const [tasks, setTasks] = useState<Task[]>([]);\r\n  const [students, setStudents] = useState<Student[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [successMessage, setSuccessMessage] = useState<string | null>(null);\r\n  \r\n  const [openDialog, setOpenDialog] = useState(false);\r\n  const [openWorkDialog, setOpenWorkDialog] = useState(false);\r\n  const [editingTask, setEditingTask] = useState<Task | null>(null);\r\n  const [workingTask, setWorkingTask] = useState<Task | null>(null);\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    description: '',\r\n    area: 'vocabulary' as 'vocabulary' | 'phrase' | 'grammar' | 'logic',\r\n  });\r\n  const [workData, setWorkData] = useState({\r\n    googleSheetLink: '',\r\n    previewData: [] as Array<{ unit: string; english: string; meaning: string }>,\r\n    isLoading: false,\r\n    isSaving: false,\r\n    error: '',\r\n  });\r\n\r\n  // 과제와 학생 목록 불러오기\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const [tasksData, studentsData] = await Promise.all([\r\n        taskService.getAll(),\r\n        studentService.getAll()\r\n      ]);\r\n      setTasks(tasksData);\r\n      setStudents(studentsData);\r\n    } catch (err) {\r\n      setError('데이터를 불러오는데 실패했습니다.');\r\n      console.error(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleOpenDialog = (task?: Task, area?: 'vocabulary' | 'phrase' | 'grammar' | 'logic') => {\r\n    if (task) {\r\n      setEditingTask(task);\r\n      setFormData({\r\n        title: task.title,\r\n        description: task.description,\r\n        area: task.area,\r\n      });\r\n    } else {\r\n      setEditingTask(null);\r\n      setFormData({\r\n        title: '',\r\n        description: '',\r\n        area: area || 'vocabulary',\r\n      });\r\n    }\r\n    setOpenDialog(true);\r\n  };\r\n\r\n  const handleCloseDialog = () => {\r\n    setOpenDialog(false);\r\n    setEditingTask(null);\r\n    setFormData({\r\n      title: '',\r\n      description: '',\r\n      area: 'vocabulary',\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    try {\r\n      if (editingTask) {\r\n        // 과제 수정\r\n        const updatedTask = await taskService.update(editingTask.id, formData);\r\n        setTasks(tasks.map(task => task.id === editingTask.id ? updatedTask : task));\r\n        setSuccessMessage('과제가 수정되었습니다.');\r\n      } else {\r\n        // 새 과제 추가\r\n        const newTask = await taskService.create(formData);\r\n        setTasks([...tasks, newTask]);\r\n        setSuccessMessage('과제가 추가되었습니다.');\r\n      }\r\n      handleCloseDialog();\r\n    } catch (err) {\r\n      setError('과제 저장에 실패했습니다.');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const handleDeleteTask = async (taskId: string) => {\r\n    if (window.confirm('정말로 이 과제를 삭제하시겠습니까?')) {\r\n      try {\r\n        await taskService.delete(taskId);\r\n        setTasks(tasks.filter(task => task.id !== taskId));\r\n        setSuccessMessage('과제가 삭제되었습니다.');\r\n      } catch (err) {\r\n        setError('과제 삭제에 실패했습니다.');\r\n        console.error(err);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleWorkTask = async (task: Task) => {\r\n    setWorkingTask(task);\r\n    setWorkData({\r\n      googleSheetLink: task.google_sheet_url || '',\r\n      previewData: [],\r\n      isLoading: false,\r\n      isSaving: false,\r\n      error: '',\r\n    });\r\n    \r\n    // 기존 단어 데이터 불러오기\r\n    if (task.area === 'vocabulary') {\r\n      try {\r\n        const vocabularyItems = await taskService.getVocabularyItems(task.id);\r\n        setWorkData(prev => ({\r\n          ...prev,\r\n          previewData: vocabularyItems.map(item => ({\r\n            unit: item.unit,\r\n            english: item.english,\r\n            meaning: item.meaning\r\n          }))\r\n        }));\r\n      } catch (err) {\r\n        console.error('단어 데이터 불러오기 실패:', err);\r\n      }\r\n    }\r\n    \r\n    setOpenWorkDialog(true);\r\n  };\r\n\r\n  const handleCloseWorkDialog = () => {\r\n    setOpenWorkDialog(false);\r\n    setWorkingTask(null);\r\n    setWorkData({\r\n      googleSheetLink: '',\r\n      previewData: [],\r\n      isLoading: false,\r\n      isSaving: false,\r\n      error: '',\r\n    });\r\n  };\r\n\r\n  const handlePreviewSheet = async () => {\r\n    if (!workData.googleSheetLink) {\r\n      setWorkData({ ...workData, error: '구글 시트 링크를 입력해주세요.' });\r\n      return;\r\n    }\r\n\r\n    if (!validateGoogleSheetUrl(workData.googleSheetLink)) {\r\n      setWorkData({ ...workData, error: '올바른 구글 시트 링크가 아닙니다.' });\r\n      return;\r\n    }\r\n\r\n    setWorkData({ ...workData, isLoading: true, error: '' });\r\n\r\n    try {\r\n      const data = await fetchGoogleSheetData(workData.googleSheetLink);\r\n      setWorkData({\r\n        ...workData,\r\n        previewData: data,\r\n        isLoading: false,\r\n        error: '',\r\n      });\r\n    } catch (error) {\r\n      setWorkData({\r\n        ...workData,\r\n        isLoading: false,\r\n        error: '데이터를 불러오는데 실패했습니다. 구글 시트가 공개되어 있는지 확인해주세요.',\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleSaveWork = async () => {\r\n    if (!workingTask) return;\r\n\r\n    try {\r\n      setWorkData({ ...workData, isSaving: true, error: '' });\r\n      \r\n      // 구글 시트 URL 업데이트\r\n      if (workData.googleSheetLink !== workingTask.google_sheet_url) {\r\n        await taskService.update(workingTask.id, {\r\n          google_sheet_url: workData.googleSheetLink\r\n        });\r\n      }\r\n\r\n      // 단어 데이터 저장\r\n      if (workingTask.area === 'vocabulary' && workData.previewData.length > 0) {\r\n        // 대량 데이터 저장 시 사용자에게 알림\r\n        if (workData.previewData.length > 1000) {\r\n          setSuccessMessage(`${workData.previewData.length}개의 단어를 저장 중입니다. 잠시만 기다려주세요...`);\r\n        }\r\n        \r\n        await taskService.addVocabularyItems(workingTask.id, workData.previewData);\r\n      }\r\n\r\n      setSuccessMessage(`작업이 저장되었습니다. (총 ${workData.previewData.length}개 단어)`);\r\n      handleCloseWorkDialog();\r\n      loadData(); // 데이터 새로고침\r\n    } catch (err) {\r\n      setError('작업 저장에 실패했습니다.');\r\n      console.error(err);\r\n    } finally {\r\n      setWorkData({ ...workData, isSaving: false });\r\n    }\r\n  };\r\n\r\n  const getAreaText = (area: string) => {\r\n    switch (area) {\r\n      case 'vocabulary': return '단어';\r\n      case 'phrase': return '문장';\r\n      case 'grammar': return '어법';\r\n      case 'logic': return '논리';\r\n      default: return area;\r\n    }\r\n  };\r\n\r\n  const getStatusText = (status: string) => {\r\n    switch (status) {\r\n      case 'active': return '진행중';\r\n      case 'completed': return '완료';\r\n      case 'pending': return '대기중';\r\n      default: return status;\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'active': return 'primary';\r\n      case 'completed': return 'success';\r\n      case 'pending': return 'warning';\r\n      default: return 'default';\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"400px\">\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box>\r\n      <Typography variant=\"h4\" gutterBottom>\r\n        과제 관리\r\n      </Typography>\r\n\r\n      {/* 영역별 과제 추가 버튼 */}\r\n      <Box sx={{ mb: 3, display: 'flex', gap: 2, flexWrap: 'wrap' }}>\r\n        <Button\r\n          variant=\"contained\"\r\n          startIcon={<AddIcon />}\r\n          onClick={() => handleOpenDialog(undefined, 'vocabulary')}\r\n        >\r\n          단어 과제 추가\r\n        </Button>\r\n        <Button\r\n          variant=\"outlined\"\r\n          startIcon={<AddIcon />}\r\n          onClick={() => handleOpenDialog(undefined, 'phrase')}\r\n        >\r\n          문장 과제 추가\r\n        </Button>\r\n        <Button\r\n          variant=\"outlined\"\r\n          startIcon={<AddIcon />}\r\n          onClick={() => handleOpenDialog(undefined, 'grammar')}\r\n        >\r\n          어법 과제 추가\r\n        </Button>\r\n        <Button\r\n          variant=\"outlined\"\r\n          startIcon={<AddIcon />}\r\n          onClick={() => handleOpenDialog(undefined, 'logic')}\r\n        >\r\n          논리 과제 추가\r\n        </Button>\r\n      </Box>\r\n\r\n      {/* 과제 목록 테이블 */}\r\n      <TableContainer component={Paper}>\r\n        <Table>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>과제명</TableCell>\r\n              <TableCell>설명</TableCell>\r\n              <TableCell>영역</TableCell>\r\n              <TableCell>상태</TableCell>\r\n              <TableCell align=\"center\">작업</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {tasks.map((task) => (\r\n              <TableRow key={task.id}>\r\n                <TableCell>{task.title}</TableCell>\r\n                <TableCell>{task.description}</TableCell>\r\n                <TableCell>\r\n                  <Chip label={getAreaText(task.area)} size=\"small\" />\r\n                </TableCell>\r\n                <TableCell>\r\n                  <Chip \r\n                    label={getStatusText(task.status)} \r\n                    size=\"small\" \r\n                    color={getStatusColor(task.status) as any}\r\n                  />\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  <IconButton\r\n                    onClick={() => handleWorkTask(task)}\r\n                    color=\"primary\"\r\n                  >\r\n                    <WorkIcon />\r\n                  </IconButton>\r\n                  <IconButton\r\n                    onClick={() => handleOpenDialog(task)}\r\n                    color=\"primary\"\r\n                  >\r\n                    <EditIcon />\r\n                  </IconButton>\r\n                  <IconButton\r\n                    onClick={() => handleDeleteTask(task.id)}\r\n                    color=\"error\"\r\n                  >\r\n                    <DeleteIcon />\r\n                  </IconButton>\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n\r\n      {/* 과제 추가/수정 다이얼로그 */}\r\n      <Dialog open={openDialog} onClose={handleCloseDialog} maxWidth=\"sm\" fullWidth>\r\n        <DialogTitle>{editingTask ? '과제 수정' : '새 과제 추가'}</DialogTitle>\r\n        <DialogContent>\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            label=\"과제명\"\r\n            fullWidth\r\n            variant=\"outlined\"\r\n            value={formData.title}\r\n            onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n            sx={{ mb: 2 }}\r\n          />\r\n          <TextField\r\n            margin=\"dense\"\r\n            label=\"설명\"\r\n            fullWidth\r\n            multiline\r\n            rows={3}\r\n            variant=\"outlined\"\r\n            value={formData.description}\r\n            onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n            sx={{ mb: 2 }}\r\n          />\r\n          <FormControl fullWidth variant=\"outlined\">\r\n            <InputLabel>영역</InputLabel>\r\n            <Select\r\n              value={formData.area}\r\n              onChange={(e) => setFormData({ ...formData, area: e.target.value as any })}\r\n              label=\"영역\"\r\n            >\r\n              <MenuItem value=\"vocabulary\">단어</MenuItem>\r\n              <MenuItem value=\"phrase\">문장</MenuItem>\r\n              <MenuItem value=\"grammar\">어법</MenuItem>\r\n              <MenuItem value=\"logic\">논리</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleCloseDialog}>취소</Button>\r\n          <Button onClick={handleSubmit} variant=\"contained\">\r\n            {editingTask ? '수정' : '추가'}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* 작업 다이얼로그 */}\r\n      <Dialog open={openWorkDialog} onClose={handleCloseWorkDialog} maxWidth=\"md\" fullWidth>\r\n        <DialogTitle>\r\n          {workingTask?.title} - 작업\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          {workingTask?.area === 'vocabulary' && (\r\n            <>\r\n              <TextField\r\n                margin=\"dense\"\r\n                label=\"구글 시트 링크\"\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                value={workData.googleSheetLink}\r\n                onChange={(e) => setWorkData({ ...workData, googleSheetLink: e.target.value })}\r\n                placeholder=\"https://docs.google.com/spreadsheets/d/...\"\r\n                sx={{ mb: 2 }}\r\n              />\r\n              <Box sx={{ mb: 2, display: 'flex', gap: 2 }}>\r\n                <Button \r\n                  variant=\"outlined\" \r\n                  onClick={handlePreviewSheet}\r\n                  disabled={workData.isLoading}\r\n                >\r\n                  {workData.isLoading ? '불러오는 중...' : '미리보기'}\r\n                </Button>\r\n              </Box>\r\n              \r\n              {workData.error && (\r\n                <Alert severity=\"error\" sx={{ mb: 2 }}>\r\n                  {workData.error}\r\n                </Alert>\r\n              )}\r\n\r\n              {workData.previewData.length > 0 && (\r\n                <Box>\r\n                  <Typography variant=\"subtitle1\" gutterBottom>\r\n                    단어 데이터 미리보기 ({workData.previewData.length}개)\r\n                  </Typography>\r\n                  <TableContainer component={Paper} sx={{ maxHeight: 400 }}>\r\n                    <Table stickyHeader size=\"small\">\r\n                      <TableHead>\r\n                        <TableRow>\r\n                          <TableCell>단원</TableCell>\r\n                          <TableCell>영어</TableCell>\r\n                          <TableCell>뜻</TableCell>\r\n                        </TableRow>\r\n                      </TableHead>\r\n                      <TableBody>\r\n                        {workData.previewData.map((item, index) => (\r\n                          <TableRow key={index}>\r\n                            <TableCell>{item.unit}</TableCell>\r\n                            <TableCell>{item.english}</TableCell>\r\n                            <TableCell>{item.meaning}</TableCell>\r\n                          </TableRow>\r\n                        ))}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </TableContainer>\r\n                </Box>\r\n              )}\r\n            </>\r\n          )}\r\n          \r\n          {workingTask?.area !== 'vocabulary' && (\r\n            <Alert severity=\"info\">\r\n              {getAreaText(workingTask?.area || '')} 영역의 작업 기능은 준비 중입니다.\r\n            </Alert>\r\n          )}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleCloseWorkDialog} disabled={workData.isSaving}>취소</Button>\r\n          <Button \r\n            onClick={handleSaveWork} \r\n            variant=\"contained\"\r\n            disabled={workData.isSaving || (workingTask?.area === 'vocabulary' && workData.previewData.length === 0)}\r\n          >\r\n            {workData.isSaving ? '저장 중...' : '저장'}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* 성공 메시지 */}\r\n      <Snackbar\r\n        open={!!successMessage}\r\n        autoHideDuration={6000}\r\n        onClose={() => setSuccessMessage(null)}\r\n      >\r\n        <Alert onClose={() => setSuccessMessage(null)} severity=\"success\">\r\n          {successMessage}\r\n        </Alert>\r\n      </Snackbar>\r\n\r\n      {/* 에러 메시지 */}\r\n      <Snackbar\r\n        open={!!error}\r\n        autoHideDuration={6000}\r\n        onClose={() => setError(null)}\r\n      >\r\n        <Alert onClose={() => setError(null)} severity=\"error\">\r\n          {error}\r\n        </Alert>\r\n      </Snackbar>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default TaskManagement; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}